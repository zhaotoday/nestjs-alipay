{"version":3,"names":["internalConfig","localizer","IS_ENUM_ITEM","_Symbol$toPrimitive","Symbol","toPrimitive","EnumItemClass","key","value","label","raw","options","_classCallCheck","_defineProperty","Object","defineProperty","writable","enumerable","configurable","defineProperties","get","_this$_options","_this$_options$autoLa","_this$_options2","_this$_localize","labelPrefix","_options","autoLabel","localeKey","_label","item","concat","_localize","undefined","content","_this$_options$locali","_this$_options3","localize","freeze","_createClass","hint","valueOf","toString","toLocaleString"],"sources":["../src/enum-item.ts"],"sourcesContent":["import { internalConfig, localizer } from './global-config';\nimport type {\n  EnumItemInit,\n  EnumItemLabel,\n  EnumKey,\n  EnumValue,\n  LocalizeInterface,\n  ValueTypeFromSingleInit,\n} from './types';\nimport { IS_ENUM_ITEM } from './utils';\n\n/**\n * - **EN:** Represents a single item in an enumeration collection.\n * - **CN:** 表示枚举集合中的单个枚举项\n *\n * @template T Represents the type of the enum item's initialization object | 表示枚举项初始化对象的类型\n * @template V Represents the type of the enum item's value (usually string or number) |\n *   表示枚举项值的类型（通常是字符串或数字）\n * @template K Represents the type of the enum item's key | 表示枚举项键的类型\n */\nexport class EnumItemClass<\n  const T extends EnumItemInit<V>,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  K extends EnumKey<any> = string,\n  V extends EnumValue = ValueTypeFromSingleInit<T, K>,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const P = any,\n> {\n  private _options: EnumItemOptions<T, K, V, P> | undefined;\n  private _label: EnumItemLabel | undefined;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private _localize: (content: string | undefined) => any;\n\n  /**\n   * - **EN:** Creates an instance of EnumItemClass.\n   * - **CN:** 创建 EnumItemClass 的实例\n   *\n   * @param key The key of the enum item | 枚举项键\n   * @param value The value of the enum item | 枚举项值\n   * @param label The display name of the enum item | 枚举项显示名称\n   * @param raw The original initialization object | 原始初始化对象\n   * @param options Optional settings for the enum item | 枚举项的可选设置\n   */\n  constructor(key: K, value: V, label: EnumItemLabel, raw: T, options?: EnumItemOptions<T, K, V, P>) {\n    this.key = key;\n    this.value = value;\n    this.label = label as string;\n    this.raw = raw;\n\n    // Should use _label instead of label closure, to make sure it can be serialized correctly\n    Object.defineProperty(this, '_label', {\n      value: label,\n      writable: false,\n      enumerable: false,\n      configurable: false,\n    });\n    // Use defineProperties instead of direct field, to:\n    // 1. Make fields readonly\n    // 2. Preserve getters after serialized/deserialized\n    Object.defineProperties(this, {\n      value: {\n        value,\n        writable: false,\n        enumerable: true,\n        configurable: false,\n      },\n      label: {\n        get: function (this: EnumItemClass<T, K, V, P>) {\n          const labelPrefix = this._options?.labelPrefix;\n          const autoLabel = this._options?.autoLabel ?? internalConfig.autoLabel;\n          let localeKey = this._label;\n          if (typeof localeKey === 'function') {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            return localeKey(this as any);\n          }\n          if (autoLabel && labelPrefix != null) {\n            if (typeof autoLabel === 'function') {\n              localeKey = autoLabel({\n                item: this,\n                labelPrefix: labelPrefix as P,\n              });\n            } else {\n              localeKey = `${labelPrefix as string}${this._label}`;\n            }\n          }\n          return this._localize(localeKey) ?? localeKey;\n        },\n        enumerable: true,\n        configurable: false,\n      },\n      key: {\n        value: key,\n        writable: false,\n        enumerable: true,\n        configurable: false,\n      },\n      raw: {\n        value: raw,\n        writable: false,\n        enumerable: true,\n        configurable: false,\n      },\n    });\n    // Do not use class field here, because don't want print this field in Node.js\n    Object.defineProperty(this, '_options', {\n      value: options,\n      writable: false,\n      enumerable: false,\n      configurable: false,\n    });\n    this._localize = undefined!;\n    Object.defineProperty(this, '_localize', {\n      value: function (this: EnumItemClass<T, K, V, P>, content: string | undefined) {\n        const localize = this._options?.localize ?? localizer.localize;\n        if (typeof localize === 'function') {\n          return localize(content);\n        }\n        return content;\n      },\n      writable: false,\n      enumerable: false,\n      configurable: false,\n    });\n\n    Object.freeze(this);\n  }\n\n  /**\n   * - **EN:** The value of the enum item\n   * - **CN:** 枚举项的值\n   */\n  readonly value: V;\n\n  /**\n   * - **EN:** The label of the enum item (also known as display name)\n   * - **CN:** 枚举项的标签（亦称显示名称）\n   */\n  readonly label: string;\n\n  /**\n   * - **EN:** The key of the enum item, which is the key in the initialization object when creating\n   *   the enum collection.\n   * - **CN:** 枚举项的键，即创建枚举集合时初始化对象中的键\n   */\n  readonly key: K;\n\n  /**\n   * - **EN:** The original initialization object of the enum item, which is the sub-object of a\n   *   single enum item when creating the enum collection.\n   * - **CN:** 枚举项的原始初始化对象，即创建枚举集合时单个枚举项的子对象\n   */\n  readonly raw: T;\n  /**\n   * - **EN:** A boolean value indicates that this is an enum item instance.\n   * - **CN:** 布尔值，表示这是一个枚举项实例\n   */\n  // Do not use readonly field here, because don't want print this field in Node.js\n  // eslint-disable-next-line @typescript-eslint/class-literal-property-style\n  get [IS_ENUM_ITEM](): true {\n    return true;\n  }\n  /**\n   * - **EN:** Auto convert to a correct primitive type. This method is called when the object is used\n   *   in a context that requires a primitive value.\n   *\n   * > The priority of this method is higher than both `valueOf` and `toString` methods.\n   *\n   * - **CN:** 自动转换为正确的原始类型。当对象被用在需要原始值的上下文中时会调用此方法。\n   *\n   * > 此方法的优先级高于 `valueOf` 和 `toString` 方法。\n   *\n   * @param hint {'number' | 'string' | 'default'} - A string indicating the preferred type of the\n   *   result | 指示结果的首选类型\n   *\n   * @returns The primitive value of the enum item, either its value or label based on the hint |\n   *   枚举项的原始值，根据提示返回其值或标签\n   */\n  // @ts-expect-error: because don't want show `Symbol` in vscode's intellisense, it should work in background\n  private [Symbol.toPrimitive](this: EnumItemClass<T, K, V>, hint: 'number' | 'string' | 'default'): V | string {\n    if (hint === 'number') {\n      // for the cases like Number(value) or +value\n      return this.valueOf();\n    } else if (hint === 'string') {\n      // for the cases like String(value), `${value}`\n      return this.toString();\n    }\n    // for the cases like '' + value, value == 1\n    return this.valueOf();\n  }\n\n  /**\n   * - **EN:** Returns the string representation of the enum item, which is its label. This method is\n   *   called when the object is used in a context that requires a string value, such as string\n   *   concatenation or template literals.\n   *\n   * > The priority of this method is lower than the `valueOf` method\n   *\n   * - **CN:** 返回枚举项的字符串表示形式，即其显示名称。当对象被用在需要字符串值的上下文中时会调用此方法，例如字符串连接或模板字面量。\n   *\n   * > 此方法的优先级低于 `valueOf` 方法\n   *\n   * @returns The display name of the enum item | 枚举项的显示名称\n   */\n  toString() {\n    return this.label;\n  }\n  /**\n   * - **EN:** Returns the localized string representation of the enum item, which is its label. This\n   *   method is called when the object is used in a context that requires a localized string value,\n   *   such as `toLocaleString` method.\n   * - **CN:** 返回枚举项的本地化字符串表示形式，即其显示名称。当对象被用在需要本地化字符串值的上下文中时会调用此方法，例如 `toLocaleString` 方法。\n   *\n   * @returns The localized display name of the enum item | 枚举项的本地化显示名称\n   */\n  toLocaleString() {\n    return this.toString();\n  }\n  /**\n   * - **EN:** Returns the primitive value of the enum item, which is its value. This method is called\n   *   when the object is used in a context that requires a primitive value, such as mathematical\n   *   operations.\n   *\n   * > The priority of this method is higher than the `toString` method\n   *\n   * - **CN:** 返回枚举项的原始值，即其值。当对象被用在需要原始值的上下文中时会调用此方法，例如数学运算。\n   *\n   * > 此方法的优先级高于 `toString` 方法\n   *\n   * @returns The value of the enum item | 枚举项的值\n   */\n  valueOf() {\n    return this.value;\n  }\n}\n\nexport interface EnumItemOptions<\n  T extends EnumItemInit<V>,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  K extends EnumKey<any> = string,\n  V extends EnumValue = ValueTypeFromSingleInit<T, K>,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  P = any,\n> {\n  /**\n   * - **EN:** Localization function, used to convert the text of the enumeration item to localized\n   *   text\n   * - **CN:** 本地化函数，用于把枚举项文本转换为本地化文本\n   */\n  localize?: LocalizeInterface;\n  /**\n   * - **EN:** The label prefix for each enum item, which can be a string or an object. This option\n   *   can simplify or even omit the label definition of enum items, and is only effective when\n   *   internationalization is enabled.\n   * - **CN:** 每个枚举项的label前缀，可以是字符串，也可以是一个对象。此选项可以简化甚至省略枚举项的label定义，只有当开启国际化时才需要此选项。\n   */\n  labelPrefix?: P;\n\n  /**\n   * - **EN:** Allow setting a label prefix for enum items, simplifying or even omitting the label\n   *   definition of enum items. This option is only needed when internationalization is enabled.\n   *   The prefix is set through `options.labelPrefix` when creating the Enum, which can be a string\n   *   or an object.\n   *\n   *   - `true` - Default value. Enable automatic concatenation of enum item localeKey in\n   *       `options.labelPrefix` + `label` format. `labelPrefix` only supports string in this case.\n   *   - `Function` - Dynamically generate the localeKey for enum items. `labelPrefix` supports any type\n   *       in this case.\n   *   - `false` - Disable automatic label generation, completely relying on the `label` field defined\n   *       in the enum item.\n   *\n   * > This option has the same effect as `Enum.config.autoLabel`, but has a higher priority than the\n   * > global configuration, and only takes effect for the current enum instance.\n   *\n   * - **CN:** 允许为枚举项设置label前缀，简化甚至可以省略枚举项的label定义，只有当开启国际化时才需要此选项。创建Enum时通过 `options.labelPrefix`\n   *   设置前缀，可以是字符串，也可以是一个对象。\n   *\n   *   - `true` - 默认值，启用自动拼接，`options.labelPrefix` + `label` 自动拼接生成标签，这种情况下 `labelPrefix` 只支持字符串形式\n   *   - `Function` - 动态生成枚举项localeKey，这种情况下 `labelPrefix` 支持任意类型\n   *   - `false` - 禁用自动生成标签，完全依赖枚举项中定义的 `label` 字段\n   *\n   * > 此选项与 `Enum.config.autoLabel` 作用相同，但优先级高于全局配置，仅对当前枚举实例生效。\n   */\n  autoLabel?: boolean | ((options: { item: EnumItemClass<T, K, V, P>; labelPrefix: P }) => string);\n}\n"],"mappings":"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"}