{"version":3,"names":["EnumItemsArray","localizer","ENUM_OPTIONS","IS_ENUM","ITEMS","KEYS","LABELS","META","NAMED","VALUES","EnumExtensionClass","_createClass","_classCallCheck","_Symbol$hasInstance","Symbol","hasInstance","EnumCollectionClass","_ref","_inherits","_super","_createSuper","_this","init","arguments","length","undefined","options","call","_defineProperty","_assertThisInitialized","Object","defineProperty","value","writable","enumerable","configurable","keys","items","freeze","includes","named","meta","forEach","item","key","get","__items__","labels","__options__","instance","_this$__options__","_this$__options__$loc","_this$__options__2","_this$__options__4","name","localize","_this$__options__3","label","keyOrValue","raw","has","findBy","_this$__items__","apply","toList","config","toMap","valueType","keyType","rawType"],"sources":["../src/enum-collection.ts"],"sourcesContent":["import type { EnumExtension } from 'enum-plus/extension';\nimport type { EnumInitOptions } from './enum';\nimport type { EnumItemClass, EnumItemOptions } from './enum-item';\nimport type { EnumItemFields, InheritableEnumItems, MapResult, ToListConfig, ToMapConfig } from './enum-items';\nimport { EnumItemsArray } from './enum-items';\nimport { localizer } from './global-config';\nimport type {\n  EnumInit,\n  EnumKey,\n  EnumValue,\n  FindEnumKeyByValue,\n  ListItem,\n  PrimitiveOf,\n  ValueTypeFromSingleInit,\n} from './types';\nimport { ENUM_OPTIONS, IS_ENUM, ITEMS, KEYS, LABELS, META, NAMED, VALUES } from './utils';\n\n/**\n * - **EN:** Enum collection extension base class, used to extend the Enums\n * - **CN:** 枚举集合扩展基类，用于扩展枚举\n */\n// @ts-expect-error: because don't know which methods are added\n// eslint-disable-next-line @typescript-eslint/no-extraneous-class\nexport class EnumExtensionClass<\n  T extends EnumInit<K, V>,\n  K extends EnumKey<T> = EnumKey<T>,\n  V extends EnumValue = ValueTypeFromSingleInit<T[K], K>,\n> implements EnumExtension<T, K, V> {}\n\n/**\n * - **EN:** Enum collection\n * - **CN:** 枚举项集合\n */\nexport class EnumCollectionClass<\n    const T extends EnumInit<K, V>,\n    K extends EnumKey<T> = EnumKey<T>,\n    V extends EnumValue = ValueTypeFromSingleInit<T[K], K>,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const P = any,\n  >\n  extends EnumExtensionClass<T, K, V>\n  implements InheritableEnumItems<T, K, V, P>\n{\n  private readonly __options__: EnumInitOptions<T, K, V, P> | undefined;\n  // used for e2e serialization\n  private readonly __items__!: EnumItemsArray<T, K, V, P>;\n\n  constructor(init: T = {} as T, options?: EnumInitOptions<T, K, V, P>) {\n    super();\n    // Do not use class field here, because don't want print this field in Node.js\n    Object.defineProperty(this, '__options__', {\n      value: options,\n      writable: false,\n      enumerable: false,\n      configurable: false,\n    });\n\n    const keys = Object.keys(init) as K[];\n    // Generate enum items array\n    const items = new EnumItemsArray<T, K, V, P>(init, options);\n    Object.freeze(items);\n    // @ts-expect-error: because use ITEMS to avoid naming conflicts in case of 'items' field name is taken\n    this[keys.includes('items') ? ITEMS : 'items'] = items;\n    Object.defineProperty(this, '__items__', {\n      value: items,\n      writable: false,\n      enumerable: false,\n      configurable: false,\n    });\n\n    // @ts-expect-error: because use KEYS to avoid naming conflicts in case of 'keys' field name is taken\n    this[keys.includes('keys') ? KEYS : 'keys'] = items[KEYS];\n\n    // @ts-expect-error: because use VALUES to avoid naming conflicts in case of 'values' field name is taken\n    this[keys.includes('values') ? VALUES : 'values'] = items[VALUES];\n\n    // @ts-expect-error: because use NAMED to avoid naming conflicts in case of 'named' field name is taken\n    this[keys.includes('named') ? NAMED : 'named'] = items.named;\n\n    // @ts-expect-error: because use META to avoid naming conflicts in case of 'meta' field name is taken\n    this[keys.includes('meta') ? META : 'meta'] = items.meta;\n\n    // Add keys to the instance, allows picking enum values by keys\n    items.forEach((item) => {\n      // @ts-expect-error: because of dynamic property\n      this[item.key] = item.value;\n    });\n\n    // @ts-expect-error: because use LABELS to avoid naming conflicts in case of 'labels' field name is taken\n    Object.defineProperty(this, keys.includes('labels') ? LABELS : 'labels', {\n      enumerable: true,\n      configurable: false,\n      get: function (this: EnumCollectionClass<T, K, V, P>) {\n        return this.__items__.labels;\n      },\n    });\n\n    Object.freeze(this);\n  }\n  /**\n   * - **EN:** A boolean value indicates that this is an enum collection instance.\n   * - **CN:** 布尔值，表示这是一个枚举集合实例\n   */\n  // Do not use readonly field here, because don't want print this field in Node.js\n  // eslint-disable-next-line @typescript-eslint/class-literal-property-style\n  get [IS_ENUM](): true {\n    return true;\n  }\n  /**\n   * - **EN:** Get the options to initialize the enum.\n   * - **CN:** 获取初始化枚举时的选项\n   */\n  get [ENUM_OPTIONS](): EnumItemOptions<T[K], K, V, P> | undefined {\n    return this.__options__;\n  }\n  [Symbol.hasInstance]<T>(instance: T): instance is Extract<T, K | V> {\n    return instance instanceof this.__items__;\n  }\n  /**\n   * The enum collection name, supports localization. Note that it usually returns a string, but if\n   * a custom `localize` function is set, the return value may vary depending on the implementation\n   * of the method.\n   *\n   * - **CN:** 枚举集合显示名称，支持本地化。注意，通常情况下返回的是字符串，但如果设置了自定义的 `localize` 函数，则返回值可能有所不同，取决于方法的实现\n   *\n   * @returns {string | undefined} The localized name of the enum collection, or undefined if not\n   *   set.\n   */\n  get name(): string | undefined {\n    if (typeof this.__options__?.name === 'function') {\n      return this.__options__.name(undefined!);\n    }\n    const localize = this.__options__?.localize ?? localizer.localize;\n    if (typeof localize === 'function') {\n      return localize(this.__options__?.name);\n    }\n    return this.__options__?.name;\n  }\n\n  label<KV extends V | K | NonNullable<PrimitiveOf<V>> | NonNullable<PrimitiveOf<K>> | undefined>(keyOrValue: KV) {\n    return this.__items__.label(keyOrValue);\n  }\n\n  key<IV extends V | NonNullable<PrimitiveOf<V>> | undefined>(value?: IV) {\n    return this.__items__.key(value);\n  }\n\n  raw(): T;\n  raw<IK extends V | K | Exclude<EnumValue, string> | NonNullable<string>>(\n    keyOrValue: IK\n  ): IK extends K ? T[IK] : IK extends V ? T[FindEnumKeyByValue<T, IK>] : T[K] | undefined;\n  raw<IK extends EnumValue>(value?: IK | unknown): T | T[K] | T[FindEnumKeyByValue<T, IK>] | undefined {\n    if (value != null) {\n      return this.__items__.raw(value as keyof T | EnumValue) as T[K];\n    } else {\n      return this.__items__.raw();\n    }\n  }\n\n  has<KV>(keyOrValue?: KV): keyOrValue is Extract<KV, K | V> {\n    return this.__items__.has(keyOrValue);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  findBy(...rest: Parameters<EnumItemsArray<T, K, V, P>['findBy']>): any {\n    return this.__items__.findBy(...rest);\n  }\n\n  toList(): ListItem<V, 'value', 'label'>[];\n  toList<\n    FOV extends string | ((item: EnumItemClass<T[K], K, V, P>) => string),\n    FOL extends string | ((item: EnumItemClass<T[K], K, V, P>) => string),\n  >(\n    config: ToListConfig<T, FOV, FOL, K, V, never, P>\n  ): ListItem<\n    V,\n    FOV extends (item: EnumItemClass<T[K], K, V, P>) => infer R ? R : FOV,\n    FOL extends (item: EnumItemClass<T[K], K, V, P>) => infer R ? R : FOL\n  >[];\n  toList<\n    FOV extends string | ((item: EnumItemClass<T[K], K, V, P>) => string),\n    FOL extends string | ((item: EnumItemClass<T[K], K, V, P>) => string),\n  >(\n    config?: ToListConfig<T, FOV, FOL, K, V, never, P>\n  ):\n    | ListItem<V, 'value', 'label'>[]\n    | ListItem<\n        V,\n        FOV extends (item: EnumItemClass<T[K], K, V, P>) => infer R ? R : FOV,\n        FOL extends (item: EnumItemClass<T[K], K, V, P>) => infer R ? R : FOL\n      >[] {\n    return this.__items__.toList(config as ToListConfig<T, FOV, FOL, K, V, never, P>);\n  }\n\n  toMap(): MapResult<T, 'value', 'label', K, V, P>;\n  toMap<\n    KS extends EnumItemFields | (<R extends string | symbol>(item: EnumItemClass<T[K], K, V, P>) => R),\n    VS extends EnumItemFields | (<R>(item: EnumItemClass<T[K], K, V, P>) => R),\n  >(config: ToMapConfig<T, KS, VS, K, V, P>): MapResult<T, KS, VS, K, V, P>;\n  toMap<\n    KS extends EnumItemFields | (<R extends string | symbol>(item: EnumItemClass<T[K], K, V, P>) => R),\n    VS extends EnumItemFields | (<R>(item: EnumItemClass<T[K], K, V, P>) => R),\n  >(config?: ToMapConfig<T, KS, VS, K, V, P>): MapResult<T, KS, VS, K, V, P> {\n    return this.__items__.toMap(config as ToMapConfig<T, KS, VS, K, V, P>);\n  }\n\n  get valueType() {\n    return this.__items__.valueType;\n  }\n  get keyType() {\n    return this.__items__.keyType;\n  }\n  get rawType() {\n    return this.__items__.rawType;\n  }\n}\n"],"mappings":"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"}